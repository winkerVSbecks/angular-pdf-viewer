function delegateService(e){return["$log",function(t){function n(e){this.handle=e}var a=this,o=this._instances=[];this._registerInstance=function(e,t){return e.$$delegateHandle=t,o.push(e),function(){var t=o.indexOf(e);-1!==t&&o.splice(t,1)}},this.$getByHandle=function(e){return e?new n(e):a},e.forEach(function(e){n.prototype[e]=function(){var n,a,r=this.handle,l=arguments,i=0;return o.forEach(function(t){t.$$delegateHandle===r&&(i++,a=t[e].apply(t,l),1===i&&(n=a))}),i?n:t.warn('Delegate for handle "'+this.handle+'" could not find a corresponding element with delegate-handle="'+this.handle+'"! '+e+"() was not called!\nPossible cause: If you are calling "+e+'() immediately, and your element with delegate-handle="'+this.handle+'" is a child of your controller, then your element may not be compiled yet. Put a $timeout around your call to '+e+"() and try again.")},a[e]=function(){var t,n,a=arguments;return o.forEach(function(o,r){n=o[e].apply(o,a),0===r&&(t=n)}),t}})}]}angular.module("pdf",[]).service("pdfDelegate",delegateService(["prev","next","zoomIn","zoomOut","zoomTo","rotate","getPageCount","getCurrentPage","goToPage","destroy","load"])),angular.module("pdf").controller("PdfCtrl",["$scope","$element","$attrs","pdfDelegate","$log","$q",function(e,t,n,a,o,r){var l=a._registerInstance(this,n.delegateHandle);e.$on("$destroy",l);var i,u=this,d=e.$eval(n.url),c=e.$eval(n.headers);e.pageCount=0;var g=1,s=0,f=n.scale?n.scale:1,p="undefined"!=typeof n.showAllPages&&"false"!==n.showAllPages,h=t.find("div")[0],m=n.maxWidth?n.maxWidth:!1,v=function(e){angular.isNumber(e)||(e=parseInt(e)),i.getPage(e).then(function(e){var t=e.getViewport(f),n=document.createElement("canvas"),a=n.getContext("2d");m&&t.width>m&&(t=e.getViewport(m/t.width)),n.height=t.height,n.width=t.width,n.style.display="block",h.appendChild(n);var o={canvasContext:a,viewport:t};e.render(o)})},y=function(){for(var e=1;e<=i.numPages;e++)v(e)},$=function(){for(var e=t.find("canvas"),n=0;n<e.length;n++){var a=e[n];a.style.webkitTransform="rotate("+s+"deg)",a.style.MozTransform="rotate("+s+"deg)",a.style.msTransform="rotate("+s+"deg)",a.style.OTransform="rotate("+s+"deg)",a.style.transform="rotate("+s+"deg)"}},w=function(){for(;h.lastChild;)h.removeChild(h.lastChild)},P=function(){i.destroy()},b=function(){i.cleanup()};u.prev=function(){1>=g||p||(w(),g=parseInt(g,10)-1,v(g))},u.next=function(){g>=i.numPages||p||(w(),g=parseInt(g,10)+1,v(g))},u.zoomIn=function(e){return e=e||.2,f=parseFloat(f)+e,w(),p?y():v(g),f},u.zoomOut=function(e){return e=e||.2,f=parseFloat(f)-e,f=f>0?f:.1,w(),p?y():v(g),f},u.zoomTo=function(e){return e=e?e:1,f=parseFloat(e),w(),p?y():v(g),f},u.rotate=function(){s=0===s?90:90===s?180:180===s?270:0,$()},u.getPageCount=function(){return e.pageCount},u.getCurrentPage=function(){return g},u.goToPage=function(e){null!==i&&(g=e,v(e))},u.destroy=function(){return P(),b(),u},u.load=function(t,n){t&&(d=t);var a={};return"string"==typeof d?a.url=d:a.data=d,c&&(a.httpHeaders=c),PDFJS.getDocument(a,null,null,n).then(function(t){i=t,p?y():v(1),e.$apply(function(){e.pageCount=t.numPages})},function(e){return o.error(e),r.reject(e)})},d&&u.load()}]),angular.module("pdf").directive("pdfViewerToolbar",["pdfDelegate",function(e){return{restrict:"E",template:'<div class="clearfix mb2 white bg-blue"><div class="left"><a href=""ng-click="prev()"class="button py2 m0 button-nav-dark">Back</a><a href=""ng-click="next()"class="button py2 m0 button-nav-dark">Next</a><a href=""ng-click="zoomIn()"class="button py2 m0 button-nav-dark">Zoom In</a><a href=""ng-click="zoomOut()"class="button py2 m0 button-nav-dark">Zoom Out</a><a href=""ng-click="rotate()"class="button py2 m0 button-nav-dark">Rotate</a><span class="px1">Page</span> <input type="text" class="field-dark" min=1 ng-model="currentPage" ng-change="goToPage()" style="width: 10%">  / {{pageCount}}</div></div>',scope:{pageCount:"="},link:function(t,n,a){var o=a.delegateHandle;t.currentPage=1,t.prev=function(){e.$getByHandle(o).prev(),r()},t.next=function(){e.$getByHandle(o).next(),r()},t.zoomIn=function(){e.$getByHandle(o).zoomIn()},t.zoomOut=function(){e.$getByHandle(o).zoomOut()},t.rotate=function(){e.$getByHandle(o).rotate()},t.goToPage=function(){e.$getByHandle(o).goToPage(t.currentPage)};var r=function(){t.currentPage=e.$getByHandle(o).getCurrentPage()}}}}]),angular.module("pdf").directive("pdfViewer",["$window","$log","pdfDelegate",function(){return{restrict:"E",template:'<pdf-viewer-toolbar ng-if="showToolbar" delegate-handle="{{id}}" page-count="pageCount"></pdf-viewer-toolbar><div></div>',scope:!0,controller:"PdfCtrl",link:function(e,t,n){e.id=n.delegateHandle,e.showToolbar=e.$eval(n.showToolbar)||!1}}}]);